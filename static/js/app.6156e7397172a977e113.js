webpackJsonp([1],{"/zTA":function(e,t,a){e.exports=a.p+"static/media/friendship.d249116.mp3"},"8rZo":function(e,t){},"CE/g":function(e,t){},GBn0:function(e,t){},H7NH:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("/xf8"),s={name:"App",sockets:{connect:function(){console.log("socket connected")},customEmit:function(e){console.log('this method was fired by the socket server. eg: io.emit("customEmit", data)')}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=a("C7Lr")(s,r,!1,function(e){a("Pj+K")},"data-v-3988862c",null).exports,i=a("KGCO"),l=a("4YfN"),c=a.n(l),u=a("R4Sj"),d={name:"login",data:function(){return{loginForm:{username:"",password:""},rules:{username:[{trigger:"blur",validator:function(e,t,a){""===t?a(new Error("请输入用户名")):a()}}],password:[{trigger:"blur",validator:function(e,t,a){""===t?a(new Error("请输入密码")):a()}}]}}},methods:c()({},Object(u.b)(["handleLogin","handleUserInfo"]),{showLogin:function(){this.showReg=!1},showRegister:function(){this.showReg=!0},login:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("验证失败"),!1;var a={username:t.loginForm.username,password:t.loginForm.password};t.$store,t.handleLogin(a).then(function(e){1===e.data.code&&t.handleUserInfo().then(function(e){t.$message({message:"登陆成功",type:"success"}),t.$router.push({name:"main"})})}).catch(function(e){console.log(e)})})}}),mounted:function(){}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-lg-3 login-box"},[a("h5",{staticClass:"title"},[e._v("用户登录")]),e._v(" "),a("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.login("loginForm")}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"button col-lg-12",attrs:{type:"primary"},on:{click:function(t){e.login("loginForm")}}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var p=a("C7Lr")(d,m,!1,function(e){a("XAiR")},null,null).exports,h=a("aozt"),f=a.n(h),v=f.a.create({timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json; charset=utf-8"},"Content-Type":"application/json; charset=utf-8"});v.interceptors.request.use(function(e){var t=sessionStorage.getItem("token");return e.headers.common.Authorization="Bearer "+t,e}),v.adornUrl=function(e){return"http://116.62.147.91:3030"+e};var g=v,b={data:function(){return{systemInfo:{}}},created:function(){var e=this;g({url:g.adornUrl("/system"),method:"get"}).then(function(t){e.systemInfo=t.data.data})},methods:{}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("nav",{staticClass:"wrap-navbar"},[t("div",{staticClass:"wrap-navbar-title"},[t("img",{staticClass:"logo",attrs:{src:this.systemInfo.logo,alt:"logo"}}),this._v(" "),t("div",{staticClass:"logo-box"},[t("div",{staticClass:"slogon",attrs:{title:this.systemInfo.version}},[this._v(this._s(this.systemInfo.slogon))])])]),this._v(" "),t("div",{staticClass:"wrap-navbar-content"})])},staticRenderFns:[]};var w=a("C7Lr")(b,_,!1,function(e){a("CE/g")},"data-v-4e3a89ee",null).exports,y={data:function(){return{newOrderCount:0,currentIndex:0}},computed:c()({},Object(u.c)({role:function(e){return e.role}})),sockets:{NEW_ORDER:function(e){this.newOrderCount++}},methods:{clear:function(){this.currentIndex=3,this.newOrderCount=0}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",{staticClass:"wrap-sidebar"},[a("ul",[a("li",{staticClass:"link"},[a("router-link",{attrs:{to:{name:"types"}}},[a("i",{staticClass:"el-icon-menu"}),e._v(" 菜品分类")])],1),e._v(" "),a("li",{staticClass:"link"},[a("router-link",{attrs:{to:{name:"dishes"}}},[a("i",{staticClass:"el-icon-tickets"}),e._v(" 菜品列表")])],1),e._v(" "),a("li",{staticClass:"link"},[a("router-link",{attrs:{to:{name:"tables"}}},[a("i",{staticClass:"el-icon-news"}),e._v(" 桌号管理")])],1),e._v(" "),a("li",{staticClass:"link",on:{click:e.clear}},[a("router-link",{attrs:{to:{name:"order"}}},[a("i",{staticClass:"el-icon-document"}),e._v(" 订单管理"),e.newOrderCount>0?a("el-badge",{attrs:{value:e.newOrderCount}}):e._e()],1)],1),e._v(" "),a("li",{staticClass:"link"},[a("router-link",{attrs:{to:{name:"income"}}},[a("i",{staticClass:"el-icon-download"}),e._v(" 收入管理")])],1),e._v(" "),a("li",{staticClass:"link"},[a("router-link",{attrs:{to:{name:"records"}}},[a("i",{staticClass:"el-icon-date"}),e._v(" 历史订单")])],1),e._v(" "),0==e.role?a("li",{staticClass:"link"},[a("router-link",{attrs:{to:{name:"info"}}},[a("i",{staticClass:"el-icon-setting"}),e._v(" 用户管理")])],1):e._e(),e._v(" "),a("li",{staticClass:"link"},[a("router-link",{attrs:{to:{name:"meterial"}}},[a("i",{staticClass:"el-icon-picture"}),e._v(" 素材管理")])],1)])])},staticRenderFns:[]};var C={render:function(){var e=this.$createElement,t=this._self._c||e;return t("main",{staticClass:"wrap-main"},[t("div",[t("router-view")],1)])},staticRenderFns:[]};var $={name:"main-index",components:{MainNavbar:w,MainSidebar:a("C7Lr")(y,k,!1,function(e){a("RaqA")},"data-v-60f1a194",null).exports,MainContent:a("C7Lr")({},C,!1,function(e){a("saaq")},"data-v-18198fa0",null).exports},methods:{logout:function(){var e=this;this.$store.dispatch("logout").then(function(t){e.$router.push({path:"/"})})}}},x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main"},[t("main-navbar"),this._v(" "),t("main-sidebar"),this._v(" "),t("div",{staticClass:"wrap-content"},[t("main-content")],1),this._v(" "),t("div",{on:{click:this.logout}},[this._v("logout")])],1)},staticRenderFns:[]};var L=a("C7Lr")($,x,!1,function(e){a("WKXe")},"data-v-4e3a45aa",null).exports,S={name:"main-types",data:function(){return{addList:{name:"",desc:""},menuList:[{name:"小红",desc:"小绿",showEdit:!1}]}},methods:c()({},Object(u.b)(["handleAddTypesList","handleDeleteType","handleUpdataType"]),{handleEdit:function(e,t){t.showEdit=!0},handleFinish:function(e,t){var a=this;if(""!==t.name){var n={};n.id=t.id,n.name=t.name,"暂无描述"!==t.desc&&(n.desc=t.desc),this.handleUpdataType(n).then(function(e){console.log(e),1===e.data.code?(a.$message({type:"success",message:"修改成功!"}),a.getTypesInfo()):0===e.data.code?a.$message.error(e.data.errMsg):-1===e.data.code&&a.$message.error(e.data.errMsg)}),t.showEdit=!1}else this.$message.error("请输入分类名称")},handleDelete:function(e,t){var a=this;this.$confirm('是否删除 "'+t.name+'" 这一分类',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.handleDeleteType(t.id).then(function(e){1===e.data.code?(a.$message({type:"success",message:"删除成功!"}),a.getTypesInfo()):a.$message({message:"警告哦，这是一条警告消息",type:"warning"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})}).then(function(){a.handleDeleteType(t.id).then(function(e){1===e.data.code?a.$message({type:"success",message:"删除成功!"}):a.$message({message:"警告哦，这是一条警告消息",type:"warning"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},addTypesList:function(){var e=this;this.addList.name?this.handleAddTypesList(this.addList).then(function(t){1===t.data.code?(e.$message({message:"添加成功",type:"success"}),e.getTypesInfo()):0===t.data.code?e.$message.error(t.data.errMsg):-1===t.data.code&&e.$message.error(t.data.errMsg)}).catch(function(e){console.log(e.response)}):this.$message.error("请输入分类名")},onSubmit:function(){this.addTypesList(),this.addList={name:"",desc:""}},getTypesInfo:function(){var e=this;this.$store.dispatch("handleGetTypeInfo").then(function(t){t.list.forEach(function(e){e.showEdit=!1}),e.menuList=t.list}).catch(function(e){console.log(e.response)})}}),mounted:function(){this.getTypesInfo()}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.addList}},[a("el-form-item",{attrs:{label:"添加类别"}},[a("el-input",{attrs:{placeholder:"添加类别"},model:{value:e.addList.name,callback:function(t){e.$set(e.addList,"name",t)},expression:"addList.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{placeholder:"描述"},model:{value:e.addList.desc,callback:function(t){e.$set(e.addList,"desc",t)},expression:"addList.desc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.menuList,border:""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"分类名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showEdit?a("el-input",{attrs:{value:t.row.name},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}}):a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showEdit?a("el-input",{attrs:{value:t.row.desc},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}}):a("span",[e._v(e._s(t.row.desc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showEdit?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleFinish(t.$index,t.row)}}},[e._v("完成")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),t.row.showEdit?a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.row.showEdit=!1}}},[e._v("取消编辑")]):e._e()]}}])})],1)],1)},staticRenderFns:[]};var F=a("C7Lr")(S,N,!1,function(e){a("GBn0")},null,null).exports,z=a("HzJ8"),D=a.n(z),E=function(e){return g({url:g.adornUrl("/menu/getlist"),method:"get",params:e})},U={name:"dishes-edit",props:{dialogVisible:Boolean,typeList:Array,dishesForm:Object,status:Number},data:function(){return{show:!1}},methods:{editForm:function(e){this.$emit("edit",e),console.log(this.dishesForm),console.log("parent",this.$parent.dishesForm)},handleClose:function(){this.$parent.dialogVisible=this.show,this.$parent.clear()}}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.status?"修改菜品":"添加菜品",visible:e.dialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.dishesForm,size:"small"}},[a("el-form-item",{attrs:{label:"菜品名称"}},[a("el-input",{attrs:{placeholder:"菜品名称"},model:{value:e.dishesForm.name,callback:function(t){e.$set(e.dishesForm,"name",t)},expression:"dishesForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜品图片"}},[a("el-input",{attrs:{placeholder:"菜品图片"},model:{value:e.dishesForm.img,callback:function(t){e.$set(e.dishesForm,"img",t)},expression:"dishesForm.img"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属分类"}},[a("el-select",{attrs:{placeholder:"所属分类"},model:{value:e.dishesForm.cid,callback:function(t){e.$set(e.dishesForm,"cid",t)},expression:"dishesForm.cid"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"菜品价格"}},[a("el-input",{attrs:{placeholder:"菜品价格"},model:{value:e.dishesForm.price,callback:function(t){e.$set(e.dishesForm,"price",t)},expression:"dishesForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜品描述"}},[a("el-input",{attrs:{placeholder:"菜品描述"},model:{value:e.dishesForm.desc,callback:function(t){e.$set(e.dishesForm,"desc",t)},expression:"dishesForm.desc"}})],1),e._v(" "),a("el-form-item")],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editForm(!1)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editForm(!0)}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]},I={name:"main-dishes",components:{DishesEdit:a("C7Lr")(U,T,!1,null,null,null).exports},data:function(){return{curID:"",curCID:"",dishesCID:"",dialogVisible:!1,status:0,dishesDatas:[],typeList:[],dishesForm:{name:"",img:"",price:"",cid:"",desc:""},pages:{total:0,pageSize:10,pageNum:1}}},watch:{dishesCID:function(e,t){"全部"===e?this.getDishes():this.getDishesCID(e)}},mounted:function(){this.getTypes()},computed:{cidStr:function(){var e=this;return function(t){var a=!0,n=!1,s=void 0;try{for(var r,o=D()(e.typeList);!(a=(r=o.next()).done);a=!0){var i=r.value;if(i.id===t)return i.name}}catch(e){n=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw s}}}}},methods:{getTypes:function(){var e=this;g({url:g.adornUrl("/category/list"),method:"get"}).then(function(t){var a=t.data,n=a.code,s=a.data;1===n&&(e.typeList=s.list,e.$nextTick(function(){e.getDishes()}))}).catch(function(e){console.log(e)})},getDishes:function(){var e=this,t={cid:this.dishesCID,pageNum:this.pages.pageNum,pageSize:this.pages.pageSize};E(t).then(function(t){var a=t.data,n=a.code,s=a.data;1===n&&(e.dishesDatas=s.list,e.dishesCID="",e.pages.total=s.total)}).catch(function(e){console.log(e)})},getDishesCID:function(e){var t=this,a=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],{cid:this.dishesCID,pageNum:this.pages.pageNum,pageSize:this.pages.pageSize});E(a).then(function(e){var a=e.data,n=a.code,s=a.data;1===n&&(t.dishesDatas=s.list,t.pages.total=s.total)}).catch(function(e){console.log(e)})},dealDatas:function(e){e?(this.status?this.editDo():this.add(),console.log("确定")):(this.dialogVisible=!1,this.clear())},add:function(){var e,t=this;(e=this.dishesForm,g({url:g.adornUrl("/menu/add"),method:"post",data:e})).then(function(e){var a=e.data,n=a.code,s=a.msg,r=a.errMsg;switch(n){case 0:t.$message({message:r,type:"warning"});break;case 1:t.$message({message:s,type:"success"}),t.clear(),t.dialogVisible=!1,t.getDishes()}}).catch(function(e){t.$message({message:"添加失败",type:"error"})})},edit:function(e){for(var t in this.dishesForm)this.dishesForm[t]=e[t];this.curID=e._id,this.status=1,this.dialogVisible=!0},editDo:function(){var e=this,t=this.dishesForm;t.id=this.curID,function(e){return g({url:g.adornUrl("/menu/update"),method:"post",data:e})}(t).then(function(t){var a=t.data,n=a.code,s=a.msg;1===n&&(e.$message({message:s,type:"success"}),e.clear(),e.dialogVisible=!1,e.getDishes())})},del:function(e,t){var a=this,n={id:e};this.$confirm("您正在删除菜品，是否确认删除《"+t+"》？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(e){return g({url:g.adornUrl("/menu/delete"),method:"post",data:e})})(n).then(function(e){1===e.data.code&&(a.$message({type:"success",message:"菜品删除成功!"}),a.getDishes())})}).catch(function(e){console.log(e)})},clear:function(){for(var e in this.dishesForm)this.dishesForm[e]=""},handleSizeChange:function(e){this.pages.pageSize=e,this.pages.pageNum=1,this.getDishes()},handleCurrentChange:function(e){this.pages.pageNum=e,this.getDishes()},pagesChange:function(e,t){this.pages.currentPage1=e,this.pages.total=t,this.pages.size=10}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加菜品")]),e._v(" "),a("el-select",{attrs:{placeholder:"所属分类"},model:{value:e.dishesCID,callback:function(t){e.dishesCID=t},expression:"dishesCID"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2),e._v(" "),a("DishesEdit",{attrs:{dialogVisible:e.dialogVisible,typeList:e.typeList,dishesForm:e.dishesForm,status:e.status},on:{edit:e.dealDatas}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dishesDatas}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"菜品名称"}},[a("span",[e._v(e._s(t.row.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"菜品 ID"}},[a("span",[e._v(e._s(t.row._id))])]),e._v(" "),a("el-form-item",{attrs:{label:"菜品价格"}},[a("span",[e._v(e._s(t.row.price))])]),e._v(" "),a("el-form-item",{attrs:{label:"所属分类"}},[a("span",[e._v(e._s(e.cidStr(t.row.cid)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新日期"}},[a("span",[e._v(e._s(t.row.updateTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"菜品描述"}},[a("span",[e._v(e._s(t.row.desc))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"img",label:"菜品图片",width:"300"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.img,alt:e.row.name,width:"60",height:"60"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"_id",label:"菜品 ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"菜品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"菜品价格",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(a){e.edit(t.row)}}},[e._v("Edit")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.del(t.row._id,t.row.name)}}},[e._v("Delete")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.pages.currentPage1,"page-sizes":[10,20,40,60],"page-size":e.pages.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pages.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pages,"currentPage1",t)}}})],1)},staticRenderFns:[]};var A=a("C7Lr")(I,R,!1,function(e){a("mLvV")},null,null).exports,O={name:"main-table-number",data:function(){return{tableList:[],typeList:[],tableForm:{num:""}}},mounted:function(){this.getTableNumber()},methods:{getTableNumber:function(){var e=this;g({url:g.adornUrl("/table/list"),method:"get"}).then(function(t){console.log(t);var a=t.data,n=a.code,s=a.data;1===n&&(e.tableList=s.list)}).catch(function(e){console.log(e)})},add:function(){var e,t=this;(e=this.tableForm,g({url:g.adornUrl("/table/add"),method:"post",data:e})).then(function(e){console.log(e);var a=e.data,n=a.code,s=a.msg,r=a.errMsg;switch(n){case 0:t.$message({message:r,type:"warning"});break;case 1:t.$message({message:s,type:"success"}),t.getTableNumber(),t.tableForm.num=""}}).catch(function(e){console.log(e),t.$message({message:"添加失败",type:"error"})})},handleDelete:function(e){var t=this;this.$confirm("您正在删除桌号，是否确认删除《"+e.num+"》？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a={id:e._id},g({url:g.adornUrl("/table/delete"),method:"post",data:a})).then(function(e){1===e.data.code&&(t.$message({type:"success",message:e.data.data}),t.getTableNumber())})}).catch(function(e){console.log(e)})}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.tableForm,size:"small"}},[a("el-form-item",{attrs:{label:"桌号"}},[a("el-input",{attrs:{placeholder:"桌号"},model:{value:e.tableForm.num,callback:function(t){e.$set(e.tableForm,"num",t)},expression:"tableForm.num"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"桌号 ID",prop:"_id"}}),e._v(" "),a("el-table-column",{attrs:{label:"桌号",prop:"num"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var V=a("C7Lr")(O,q,!1,function(e){a("gh9o")},"data-v-c67bbac8",null).exports,j={name:"main-info",data:function(){return{userLists:[],addList:{username:"",password:""}}},computed:{},methods:c()({},Object(u.b)(["handleUserReg","handleGetUserLists","handleUpdateUser"]),{handleEdit:function(e,t){t.showEdit=!0},handleFinish:function(e,t){var a=this,n={};n.username=t.username,n.password=t.password,n.id=t._id,this.handleUpdateUser(n).then(function(e){1===e.data.code?(a.$message({type:"success",message:"添加成功!"}),t.showEdit=!1):a.$message.error(e.data.data)}).catch(function(e){console.log(res)})},getUserLists:function(){var e=this;this.handleGetUserLists().then(function(t){t.data.data.userLists.forEach(function(e){e.showEdit=!1,-1===e.avatar.indexOf("http://116.62.147.91:3030")&&(e.avatar="http://116.62.147.91:3030"+e.avatar)}),e.userLists=t.data.data.userLists}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this;""===this.addList.username?this.$message.error("请输入要添加的用户名"):""===this.addList.password?this.$message.error("请输入密码"):this.handleUserReg(this.addList).then(function(t){1===t.data.code?e.$message({type:"success",message:"添加成功!"}):e.$message.error(t.data.data)}).catch(function(e){console.log(e)})},handleDelete:function(e,t){console.log(t),function(e){return g({url:g.adornUrl("/user/del"),method:"post",data:e})}({userId:t._id}).then(function(e){console.log(e)})}}),mounted:function(){this.getUserLists()}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.addList}},[a("p",[e._v("添加新用户")]),e._v(" "),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.addList.username,callback:function(t){e.$set(e.addList,"username",t)},expression:"addList.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.addList.password,callback:function(t){e.$set(e.addList,"password",t)},expression:"addList.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userLists,border:""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showEdit?a("el-input",{attrs:{value:t.row.username},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}}):a("span",[e._v(e._s(t.row.username))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"role",label:"权限",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showEdit?a("el-input",{attrs:{value:t.row.role},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}}):a("span",[e._v(e._s(0==t.row.role?"超级管理员":"普通管理员"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"avatar",label:"头像",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showEdit?a("el-input",{attrs:{value:t.row.avatar},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}}):a("div",{staticClass:"img-wrap"},[a("img",{attrs:{src:t.row.avatar,alt:""}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"password",label:"密码",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showEdit?a("el-input",{attrs:{value:t.row.password,type:"password"},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showEdit?a("el-button",{attrs:{size:"mini",disabled:0==t.row.role},on:{click:function(a){e.handleFinish(t.$index,t.row)}}},[e._v("完成")]):a("el-button",{attrs:{size:"mini",disabled:0==t.row.role},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:0==t.row.role,type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var B=a("C7Lr")(j,H,!1,function(e){a("8rZo")},null,null).exports,P={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("mian-income")])},staticRenderFns:[]};var M=a("C7Lr")({name:"mian-income"},P,!1,function(e){a("jXU/")},null,null).exports,X={data:function(){return{visible:!1,tableData:[],currentRow:null}},methods:{init:function(e){var t=this;this.visible=!0,this.$nextTick(function(){t.tableData=e.list})},getSummaries:function(e){var t=e.columns,a=e.data,n=[];return t.forEach(function(e,t){if(0!==t){if(1!==t&&2!==t&&3!==t){var s=a.map(function(t){return Number(t[e.property])});s.every(function(e){return isNaN(e)})?n[t]="N/A":(n[t]=s.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),n[t]+=4===t?" 份":" 元")}}else n[t]="总计"}),n}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"订单详情","close-on-click-modal":!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"show-summary":"","summary-method":e.getSummaries,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"menuItem",label:"菜名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.menuDetail.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"image",label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{width:"40",height:"40",src:e.row.menuDetail.img}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.menuDetail.price)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"count",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{property:"total",label:"合计"}})],1)],1)},staticRenderFns:[]},K=a("C7Lr")(X,G,!1,null,null,null).exports,W=a("Wn42"),J=a.n(W),Z={name:"main-order",data:function(){return{orderList:[],orderVisible:!1,total:0,pageSize:10,pageNum:1}},methods:{view:function(e){var t=this;this.orderVisible=!0,this.$nextTick(function(){t.$refs.orderDetail.init(e)})},getList:function(){var e,t=this,a={pageNum:this.pageNum,pageSize:this.pageSize};(e=a,g({url:g.adornUrl("/order/hlist?")+J.a.stringify(e),method:"get"})).then(function(e){e.data.data.list.map(function(e){e.created=new Date(e.created).toLocaleString(),e.list.map(function(e){e.total=e.menuDetail.price*e.count})}),t.orderList=e.data.data.list,t.total=e.data.data.totalPage})},sizeChangeHandle:function(e){this.pageSize=e,this.pageNum=1,this.getList()},currentChangeHandle:function(e){this.pageNum=e,this.getList()},getSummaries:function(e){var t=e.columns,a=e.data,n=[];return t.forEach(function(e,t){if(0!==t){if(1!==t&&2!==t&&3!==t&&4!==t&&6!==t){var s=a.map(function(t){return Number(t[e.property])});s.every(function(e){return isNaN(e)})?n[t]="N/A":(n[t]=s.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),n[t]+=" 元")}}else n[t]="合计"}),n}},mounted:function(){this.getList()},components:{OrderDetail:K}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-order-record"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderList,border:"","show-summary":"","summary-method":e.getSummaries}},[a("el-table-column",{attrs:{type:"index",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tableNum",width:"100px",sortable:"",label:"桌号"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.tableNum?[e._v("\n        "+e._s(t.row.tableNum.num)+"\n      ")]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNum",sortable:"",label:"订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created",sortable:"",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.created)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"实付金额"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.view(t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.total},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}),e._v(" "),e.orderVisible?a("order-detail",{ref:"orderDetail"}):e._e()],1)},staticRenderFns:[]};var Q=a("C7Lr")(Z,Y,!1,function(e){a("sk8z")},null,null).exports,ee={data:function(){return{visible:!1,tableData:[],currentRow:null}},methods:{init:function(e){var t=this;this.visible=!0,this.$nextTick(function(){t.tableData=e.list})},getSummaries:function(e){var t=e.columns,a=e.data,n=[];return t.forEach(function(e,t){if(0!==t){if(1!==t&&2!==t&&3!==t){var s=a.map(function(t){return Number(t[e.property])});s.every(function(e){return isNaN(e)})?n[t]="N/A":(n[t]=s.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),n[t]+=4===t?" 份":" 元")}}else n[t]="总计"}),n}}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"订单详情","close-on-click-modal":!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"show-summary":"","summary-method":e.getSummaries,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"menuItem",label:"菜名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.menuDetail.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"image",label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{width:"40",height:"40",src:e.row.menuDetail.img}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.menuDetail.price)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"count",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{property:"total",label:"合计"}})],1)],1)},staticRenderFns:[]},ae={name:"main-order",data:function(){return{orderList:[],orderVisible:!1,total:0,pageSize:20,pageNum:1}},methods:{clickButton:function(e){this.$socket.emit("emit_method",e)},view:function(e){var t=this;this.orderVisible=!0,this.$nextTick(function(){t.$refs.orderDetail.init(e)})},getList:function(){var e,t=this,a={pageNum:this.pageNum,pageSize:this.pageSize};(e=a,g({url:g.adornUrl("/order/clist?")+J.a.stringify(e),method:"get"})).then(function(e){e.data.data.list.map(function(e){e.created=new Date(e.created).toLocaleString(),e.list.map(function(e){e.total=e.menuDetail.price*e.count})}),t.orderList=e.data.data.list,t.total=e.data.data.totalPage})},sizeChangeHandle:function(e){this.pageSize=e,this.pageNum=1,this.getList()},currentChangeHandle:function(e){this.pageNum=e,this.getList()},handleFinish:function(e,t){var a=this;(function(e){return g({url:g.adornUrl("/order/update"),method:"post",data:e})})({orderId:t._id,status:e}).then(function(e){1==e.data.code&&a.getList()})},getSummaries:function(e){var t=e.columns,a=e.data,n=[];return t.forEach(function(e,t){if(0!==t){if(1!==t&&2!==t&&3!==t&&4!==t&&5!==t&&7!==t){var s=a.map(function(t){return Number(t[e.property])});s.every(function(e){return isNaN(e)})?n[t]="N/A":(n[t]=s.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),n[t]+=" 元")}}else n[t]="合计"}),n}},sockets:{NEW_ORDER:function(e){this.getList(),this.$refs.audio&&(this.$refs.audio.pause(),this.$refs.audio.play())}},mounted:function(){this.getList()},components:{OrderDetail:a("C7Lr")(ee,te,!1,null,null,null).exports}},ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-order"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderList,"show-summary":"","summary-method":e.getSummaries,border:""}},[n("el-table-column",{attrs:{type:"index",width:"80px"}}),e._v(" "),n("el-table-column",{attrs:{prop:"tableNum",width:"100px",sortable:"",label:"桌号"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.tableNum?[e._v(e._s(t.row.tableNum.num))]:void 0}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"orderNum",sortable:"",label:"订单号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"created",sortable:"",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.created))]}}])}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"status",label:"订单状态",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?n("span",[e._v("未处理")]):e._e(),e._v(" "),1==t.row.status?n("span",[e._v("已通知后厨")]):e._e(),e._v(" "),2==t.row.status?n("span",[e._v("已上菜")]):e._e(),e._v(" "),3==t.row.status?n("span",[e._v("菜以上齐")]):e._e(),e._v(" "),4==t.row.status?n("span",[e._v("已结账")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[4==t.row.status?n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}}):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"amount",label:"订单金额",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[4==t.row.status?n("el-input",{attrs:{placeholder:"请输入内容",type:"number"},model:{value:t.row.amount,callback:function(a){e.$set(t.row,"amount",a)},expression:"scope.row.amount"}}):n("span",[e._v(e._s(t.row.amount))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(a){e.view(t.row)}}},[e._v("查看")]),e._v(" "),0==t.row.status?n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleFinish(1,t.row)}}},[e._v("通知后厨")]):e._e(),e._v(" "),1==t.row.status?n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.handleFinish(2,t.row)}}},[e._v("已上菜")]):e._e(),e._v(" "),2==t.row.status?n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){e.handleFinish(3,t.row)}}},[e._v("菜以上齐")]):e._e(),e._v(" "),3==t.row.status?n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){e.handleFinish(4,t.row)}}},[e._v("已结账")]):e._e(),e._v(" "),4==t.row.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleFinish(5,t.row)}}},[e._v("完成")]):e._e()]}}])})],1),e._v(" "),n("audio",{ref:"audio",attrs:{controls:""}},[n("source",{attrs:{src:a("/zTA"),type:"audio/mp3"}})]),e._v(" "),n("el-pagination",{attrs:{background:"","page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}),e._v(" "),e.orderVisible?n("order-detail",{ref:"orderDetail"}):e._e()],1)},staticRenderFns:[]};var se=a("C7Lr")(ae,ne,!1,function(e){a("H7NH")},null,null).exports,re={props:{group:{type:String,value:"default"},pageNum:{type:Number,value:1},pageSize:{type:Number,value:10}},data:function(){return{actionUrl:g.adornUrl("/image/upload"),list:[],extData:{group:this.group,name:"未命名"},totalCount:0,pnumber:this.pageNum,psize:this.pageSize,vieverOptions:{inline:!1,button:!0,navbar:!1,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!1,fullscreen:!1,keyboard:!0,url:"data-source"},prevImages:[""]}},created:function(){this.getList()},methods:{getList:function(){var e=this;g({url:g.adornUrl("/image/query?group="+this.group+"&pageNum="+this.pnumber+"&pageSize="+this.psize),method:"get"}).then(function(t){t.data.data.list.length>0?(e.list=t.data.data.list,e.totalCount=t.data.data.totalCount):e.list=[]})},delImage:function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.operateDelete(e,t)})},previewImage:function(e){var t=this;console.log(e),this.prevImages=[e.url],setTimeout(function(){t.$el.querySelector(".viewer-box").$viewer.show()},300)},operateDelete:function(e,t){var a=this;g({url:g.adornUrl("/image/delete"),method:"POST",data:{id:e.id}}).then(function(e){e.data&&1==+e.data.code?(1===a.list.length&&(a.pnumber=a.pnumber-1||1),a.getList(),a.$message.success(e.data.msg)):a.$message.success(e.data.msg)})},onCopySuccess:function(){this.$message.success("图片URL复制成功")},onCopyError:function(){this.$message.error("复制失败, 请刷新页面后重试")},handleSuccess:function(e,t){this.$message.success("上传成功"),this.pnumber=1,this.getList()},handleError:function(){this.$message.success("上传失败")},beforeUpload:function(e){var t=/((jpe?g)|(png)|(webp))$/i.test(e.type),a=e.size/1024/1024<1;return t||this.$message.error("上传头像图片只能是 jpg/png 格式!"),a||this.$message.error("上传头像图片大小不能超过 1MB!"),t&&a},handleCurrentChange:function(e){this.pnumber=e,this.getList()}}},oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gallery-list"},[a("div",{directives:[{name:"viewer",rawName:"v-viewer",value:e.vieverOptions,expression:"vieverOptions"}],staticClass:"viewer-box"},e._l(e.prevImages,function(e){return a("img",{key:e,attrs:{src:e}})}),0),e._v(" "),a("el-row",[a("el-col",{staticClass:"card-box-outer",attrs:{span:3}},[a("div",{staticClass:"card-box upload-box"},[a("div",{staticClass:"avatar-box"},[a("el-upload",{attrs:{action:e.actionUrl,data:e.extData,"list-type":"picture-card","show-file-list":!1,"on-error":e.handleError,"on-success":e.handleSuccess,"before-upload":e.beforeUpload}},[a("i",{staticClass:"el-icon-plus"})])],1)])]),e._v(" "),e._l(e.list,function(t,n){return a("el-col",{key:t.id,staticClass:"card-box-outer",attrs:{span:3}},[a("el-card",{staticClass:"card-box",attrs:{shadow:"hover"}},[a("div",{staticClass:"avatar-box",style:{background:"url("+t.url+") no-repeat center",backgroundSize:"contain"},attrs:{title:t.url}}),e._v(" "),a("div",{staticClass:"desc-box"},[a("el-button",{attrs:{size:"small",type:"default",icon:"el-icon-picture-outline"},on:{click:function(a){a.preventDefault(),e.previewImage(t)}}},[e._v("图片预览")]),e._v(" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.url,expression:"item.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onCopyError,expression:"onCopyError",arg:"error"}],attrs:{size:"small",type:"primary",icon:"el-icon-share"}},[e._v("复制链接")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){a.preventDefault(),e.delImage(t,n)}}},[e._v("删除图片")])],1)])],1)})],2),e._v(" "),a("div",{staticClass:"pagenation-bar"},[a("el-pagination",{attrs:{"page-size":e.psize,"current-page":e.pnumber,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pnumber=t}}})],1)],1)},staticRenderFns:[]};var ie={name:"main-gallery",data:function(){return{activeName:"default"}},components:{galleryList:a("C7Lr")(re,oe,!1,function(e){a("XXUk")},"data-v-821b15c6",null).exports},methods:{handleClick:function(){}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-metarial"},[a("h6",{staticClass:"page-title"},[e._v("素材管理")]),e._v(" "),e._m(0),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"未分组",name:"default"}},[a("gallery-list",{attrs:{group:"default",pageNum:1,pageSize:15}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"菜品展示",name:"menu"}},[a("gallery-list",{attrs:{group:"menu",pageNum:1,pageSize:15}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"用户头像",name:"avatar"}},[a("gallery-list",{attrs:{group:"avatar",pageNum:1,pageSize:15}})],1)],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"usage"},[e._v("\n    素材管理模块主要用于管理本站中上传的图片。使用方法:\n    "),a("p",[e._v("1. 在本素材库找到目标图片。")]),e._v(" "),a("p",[e._v("2. 鼠标移入图片上方会出现复制和删除按钮，点击复制链接按钮可复制目标图片URL地址。")]),e._v(" "),a("p",[e._v("3. 在需要用到的地方填写得到的图片URL地址即可。")]),e._v(" "),a("p",{staticClass:"warning-text"},[e._v("说明: 图片删除时为永久删除，请确认无误后再操作!")])])}]};var ce=a("C7Lr")(ie,le,!1,function(e){a("naDc")},"data-v-baa3a1aa",null).exports;n.default.use(i.a);var ue=new i.a({routes:[{path:"/login",name:"login",component:p,meta:{requireAuth:!1}},{path:"/",name:"main",redirect:{name:"types"},component:L,meta:{requireAuth:!0},children:[{path:"/types",name:"types",component:F,meta:{requireAuth:!0}},{path:"/dishes",name:"dishes",component:A,meta:{requireAuth:!0}},{path:"/tables",name:"tables",component:V,meta:{requireAuth:!0}},{path:"/info",name:"info",component:B,meta:{requireAuth:!0}},{path:"/income",name:"income",component:M,meta:{requireAuth:!0}},{path:"/records",name:"records",component:Q,meta:{requireAuth:!0}},{path:"/order",name:"order",component:se,meta:{requireAuth:!0}},{path:"/meterial",name:"meterial",component:ce,meta:{requireAuth:!0}}]}]}),de=a("xx3G"),me=a.n(de),pe=(a("wST7"),a("rVsN")),he=a.n(pe);n.default.use(u.a);var fe=new u.a.Store({state:{status:"",token:sessionStorage.getItem("token")||"",username:"",role:"",avatar:"",id:""},mutations:{auth_request:function(e){e.status="lodaing"},auth_success:function(e,t){e.status="success",e.username=t.username,e.role=t.role,e.avatar=t.avatar,e.id=t.id},setToken:function(e,t){e.token=t}},actions:{handleLogin:function(e,t){var a=e.commit;return new he.a(function(e,n){var s;(s=t,g({url:g.adornUrl("/user/login"),method:"post",data:s})).then(function(t){if(1===t.data.code){var n=t.data.data;a("setToken",n),sessionStorage.setItem("token",n),e(t)}else e(!1)}).catch(function(e){sessionStorage.removeItem("token"),n(e)})})},logout:function(e){e.commit;return new he.a(function(e,t){sessionStorage.removeItem("token"),delete f.a.defaults.headers.common.Authorization,e()})},handleUserInfo:function(e){var t=e.commit;return new he.a(function(e,a){g({url:g.adornUrl("/user/info"),method:"get"}).then(function(a){if(1===a.data.code){var n=a.data.data;t("auth_success",n),e(n)}else e(!1)}).catch(function(e){a(e)})})},handleGetTypeInfo:function(e){e.commit;return new he.a(function(e,t){g({url:g.adornUrl("/category/list"),method:"get"}).then(function(t){if(1===t.data.code){var a=t.data.data;e(a)}}).catch(function(e){t(e)})})},handleAddTypesList:function(e,t){e.commit;var a={};return a.name=t.name,t.desc&&(a.desc=t.desc),new he.a(function(e,t){var n;(n=a,g({url:g.adornUrl("/category/add"),method:"post",data:n})).then(function(t){e(t)}).catch(function(e){t(e)})})},handleDeleteType:function(e,t){e.commit;var a={};return a.id=t,new he.a(function(e,t){var n;(n=a,g({url:g.adornUrl("/category/delete"),method:"post",data:n})).then(function(t){e(t)}).catch(function(e){t(e)})})},handleUpdataType:function(e,t){e.commit;return new he.a(function(e,a){(function(e){return g({url:g.adornUrl("/category/update"),method:"post",data:e})})(t).then(function(t){e(t)}).catch(function(e){a(e)})})},handleGetUserLists:function(e){e.commit;var t={pageNum:1,pageSize:10};return new he.a(function(e,a){(function(e){return g({url:g.adornUrl("/user/inquire"),method:"get",data:e})})(t).then(function(t){e(t)}).catch(function(e){a(e)})})},handleUserReg:function(e,t){e.commit;return new he.a(function(e,a){(function(e){return g({url:g.adornUrl("/user/reg"),method:"post",data:e})})(t).then(function(t){e(t)}).catch(function(e){a(e)})})},handleUpdateUser:function(e,t){e.commit;return new he.a(function(e,a){(function(e){return g({url:g.adornUrl("/user/update"),method:"post",data:e})})(t).then(function(t){e(t)}).catch(function(e){a(e)})})}}}),ve=a("UgaL"),ge=a.n(ve),be=a("qC7U"),_e=a.n(be),we=(a("VCqF"),a("nTvK")),ye=a.n(we);n.default.use(ye.a),n.default.use(_e.a),n.default.use(new ge.a({debug:!0,connection:"http://116.62.147.91:3030",vuex:{store:fe,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),n.default.use(me.a),n.default.http=n.default.prototype.$http=g,n.default.config.productionTip=!1,ue.beforeEach(function(e,t,a){e.meta.requireAuth?sessionStorage.getItem("token")?"success"==fe.state.status?a():fe.dispatch("handleUserInfo").then(function(e){a()}).catch(function(e){a("/login")}):a("/login"):a()}),new n.default({el:"#app",router:ue,store:fe,components:{App:o},template:"<App/>"})},"Pj+K":function(e,t){},RaqA:function(e,t){},VCqF:function(e,t){},WKXe:function(e,t){},XAiR:function(e,t){},XXUk:function(e,t){},gh9o:function(e,t){},"jXU/":function(e,t){},mLvV:function(e,t){},naDc:function(e,t){},saaq:function(e,t){},sk8z:function(e,t){},wST7:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6156e7397172a977e113.js.map