webpackJsonp([1],{"/zTA":function(t,e,n){t.exports=n.p+"static/media/friendship.d249116.mp3"},"1Xcz":function(t,e){},"2q2y":function(t,e){},"51Az":function(t,e){},"7HPM":function(t,e){},"IWu/":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("jZVR"),s={name:"App",sockets:{connect:function(){console.log("socket connected")},customEmit:function(t){console.log('this method was fired by the socket server. eg: io.emit("customEmit", data)')}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=n("C7Lr")(s,r,!1,function(t){n("jfB9")},"data-v-33089c77",null).exports,i=n("KGCO"),l=n("4YfN"),u=n.n(l),c=n("R4Sj"),d={name:"login",data:function(){return{loginForm:{username:"",password:""},rules:{username:[{trigger:"blur",validator:function(t,e,n){""===e?n(new Error("请输入用户名")):n()}}],password:[{trigger:"blur",validator:function(t,e,n){""===e?n(new Error("请输入密码")):n()}}]}}},methods:u()({},Object(c.b)(["handleLogin","handleUserInfo"]),{showLogin:function(){this.showReg=!1},showRegister:function(){this.showReg=!0},login:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("验证失败"),!1;var n={username:e.loginForm.username,password:e.loginForm.password};e.$store,e.handleLogin(n).then(function(t){1===t.data.code&&e.handleUserInfo().then(function(t){e.$message({message:"登陆成功",type:"success"}),e.$router.push({name:"main"})})}).catch(function(t){console.log(t)})})}}),mounted:function(){}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-lg-3 login-box"},[n("h5",{staticClass:"title"},[t._v("用户登录")]),t._v(" "),n("el-form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.rules,"label-width":"70px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return"keyCode"in e&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login("loginForm")}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"button col-lg-12",attrs:{type:"primary"},on:{click:function(e){return t.login("loginForm")}}},[t._v("登录")])],1)],1)],1)},staticRenderFns:[]};var p=n("C7Lr")(d,m,!1,function(t){n("XAiR")},null,null).exports,h=n("aozt"),f=n.n(h),v=f.a.create({timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json; charset=utf-8"},"Content-Type":"application/json; charset=utf-8"});v.interceptors.request.use(function(t){var e=sessionStorage.getItem("token");return t.headers.common.Authorization="Bearer "+e,t}),v.adornUrl=function(t){return"http://116.62.147.91:3030"+t};var g=v,b={data:function(){return{systemInfo:{}}},created:function(){var t=this;g({url:g.adornUrl("/system"),method:"get"}).then(function(e){t.systemInfo=e.data.data})},methods:{}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"wrap-navbar"},[e("div",{staticClass:"wrap-navbar-title"},[e("img",{staticClass:"logo",attrs:{src:this.systemInfo.logo,alt:"logo"}}),this._v(" "),e("div",{staticClass:"logo-box"},[e("div",{staticClass:"slogon",attrs:{title:this.systemInfo.version}},[this._v(this._s(this.systemInfo.slogon))])])]),this._v(" "),e("div",{staticClass:"wrap-navbar-content"})])},staticRenderFns:[]};var w=n("C7Lr")(b,_,!1,function(t){n("oIep")},"data-v-1f041f36",null).exports,y={data:function(){return{newOrderCount:0,currentIndex:0}},computed:u()({},Object(c.c)({role:function(t){return t.role}})),sockets:{NEW_ORDER:function(t){this.newOrderCount++}},methods:{clear:function(){this.currentIndex=3,this.newOrderCount=0}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{staticClass:"wrap-sidebar"},[n("ul",[n("li",{staticClass:"link",class:{active:0===t.currentIndex},on:{click:function(e){t.currentIndex=0}}},[n("router-link",{attrs:{to:{name:"types"}}},[t._v("菜品分类管理")])],1),t._v(" "),n("li",{staticClass:"link",class:{active:1===t.currentIndex},on:{click:function(e){t.currentIndex=1}}},[n("router-link",{attrs:{to:{name:"dishes"}}},[t._v("菜单管理")])],1),t._v(" "),n("li",{staticClass:"link",class:{active:2===t.currentIndex},on:{click:function(e){t.currentIndex=2}}},[n("router-link",{attrs:{to:{name:"tables"}}},[t._v("桌号管理")])],1),t._v(" "),n("li",{staticClass:"link",class:{active:3===t.currentIndex},on:{click:t.clear}},[n("router-link",{attrs:{to:{name:"order"}}},[t.newOrderCount>0?n("el-badge",{staticClass:"item",attrs:{value:t.newOrderCount}},[t._v("\n                            订单管理\n                ")]):n("span",[t._v("订单管理")])],1)],1),t._v(" "),n("li",{staticClass:"link",class:{active:4===t.currentIndex},on:{click:function(e){t.currentIndex=4}}},[n("router-link",{attrs:{to:{name:"income"}}},[t._v("收入管理")])],1),t._v(" "),n("li",{staticClass:"link",class:{active:5===t.currentIndex},on:{click:function(e){t.currentIndex=5}}},[n("router-link",{attrs:{to:{name:"records"}}},[t._v("历史订单")])],1),t._v(" "),0==t.role?n("li",{staticClass:"link",class:{active:6===t.currentIndex},on:{click:function(e){t.currentIndex=6}}},[n("router-link",{attrs:{to:{name:"info"}}},[t._v("用户管理")])],1):t._e(),t._v(" "),n("li",{staticClass:"link",class:{active:7===t.currentIndex},on:{click:function(e){t.currentIndex=7}}},[n("router-link",{attrs:{to:{name:"meterial"}}},[t._v("素材管理")])],1)])])},staticRenderFns:[]};var x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("main",{staticClass:"wrap-main"},[e("div",[e("keep-alive",[e("router-view")],1)],1)])},staticRenderFns:[]};var C={name:"main-index",components:{MainNavbar:w,MainSidebar:n("C7Lr")(y,k,!1,function(t){n("tWeq")},"data-v-6b859dc2",null).exports,MainContent:n("C7Lr")({},x,!1,function(t){n("7HPM")},"data-v-5a593f9f",null).exports},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then(function(e){t.$router.push({path:"/"})})}}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[e("main-navbar"),this._v(" "),e("main-sidebar"),this._v(" "),e("div",{staticClass:"wrap-content"},[e("main-content")],1),this._v(" "),e("div",{on:{click:this.logout}},[this._v("logout")])],1)},staticRenderFns:[]};var L=n("C7Lr")(C,$,!1,function(t){n("um6K")},"data-v-0968bb07",null).exports,S={name:"main-types",data:function(){return{addList:{name:"",desc:""},menuList:[{name:"小红",desc:"小绿",showEdit:!1}]}},methods:u()({},Object(c.b)(["handleAddTypesList","handleDeleteType","handleUpdataType"]),{handleEdit:function(t,e){e.showEdit=!0},handleFinish:function(t,e){var n=this;if(""!==e.name){var a={};a.id=e.id,a.name=e.name,"暂无描述"!==e.desc&&(a.desc=e.desc),this.handleUpdataType(a).then(function(t){console.log(t),1===t.data.code?(n.$message({type:"success",message:"修改成功!"}),n.getTypesInfo()):0===t.data.code?n.$message.error(t.data.errMsg):-1===t.data.code&&n.$message.error(t.data.errMsg)}),e.showEdit=!1}else this.$message.error("请输入分类名称")},handleDelete:function(t,e){var n=this;this.$confirm('是否删除 "'+e.name+'" 这一分类',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.handleDeleteType(e.id).then(function(t){1===t.data.code?(n.$message({type:"success",message:"删除成功!"}),n.getTypesInfo()):n.$message({message:"警告哦，这是一条警告消息",type:"warning"})})}).catch(function(){n.$message({type:"info",message:"已取消删除"})}).then(function(){n.handleDeleteType(e.id).then(function(t){1===t.data.code?n.$message({type:"success",message:"删除成功!"}):n.$message({message:"警告哦，这是一条警告消息",type:"warning"})})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},addTypesList:function(){var t=this;this.addList.name?this.handleAddTypesList(this.addList).then(function(e){1===e.data.code?(t.$message({message:"添加成功",type:"success"}),t.getTypesInfo()):0===e.data.code?t.$message.error(e.data.errMsg):-1===e.data.code&&t.$message.error(e.data.errMsg)}).catch(function(t){console.log(t.response)}):this.$message.error("请输入分类名")},onSubmit:function(){this.addTypesList(),this.addList={name:"",desc:""}},getTypesInfo:function(){var t=this;this.$store.dispatch("handleGetTypeInfo").then(function(e){e.list.forEach(function(t){t.showEdit=!1}),t.menuList=e.list}).catch(function(t){console.log(t.response)})}}),mounted:function(){this.getTypesInfo()}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.addList}},[n("el-form-item",{attrs:{label:"添加类别"}},[n("el-input",{attrs:{placeholder:"添加类别"},model:{value:t.addList.name,callback:function(e){t.$set(t.addList,"name",e)},expression:"addList.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{placeholder:"描述"},model:{value:t.addList.desc,callback:function(e){t.$set(t.addList,"desc",e)},expression:"addList.desc"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("添加")])],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.menuList,border:""}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"分类名",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.showEdit?n("el-input",{attrs:{value:e.row.name},model:{value:e.row[e.column.property],callback:function(n){t.$set(e.row,e.column.property,n)},expression:"scope.row[scope.column.property]"}}):n("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"desc",label:"描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.showEdit?n("el-input",{attrs:{value:e.row.desc},model:{value:e.row[e.column.property],callback:function(n){t.$set(e.row,e.column.property,n)},expression:"scope.row[scope.column.property]"}}):n("span",[t._v(t._s(e.row.desc))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.showEdit?n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleFinish(e.$index,e.row)}}},[t._v("完成")]):n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),e.row.showEdit?n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.row.showEdit=!1}}},[t._v("取消编辑")]):t._e()]}}])})],1)],1)},staticRenderFns:[]};var D=n("C7Lr")(S,F,!1,function(t){n("51Az")},null,null).exports,N=n("HzJ8"),z=n.n(N),I={name:"dishes-edit",props:{dialogVisible:Boolean,typeList:Array,dishesForm:Object,status:Number},data:function(){return{show:!1}},methods:{editForm:function(t){this.$emit("edit",t),console.log(this.dishesForm),console.log("parent",this.$parent.dishesForm)},handleClose:function(){this.$parent.dialogVisible=this.show,this.$parent.clear()}}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.status?"修改菜品":"添加菜品",visible:t.dialogVisible,width:"40%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.dishesForm,size:"small"}},[n("el-form-item",{attrs:{label:"菜品名称"}},[n("el-input",{attrs:{placeholder:"菜品名称"},model:{value:t.dishesForm.name,callback:function(e){t.$set(t.dishesForm,"name",e)},expression:"dishesForm.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"菜品图片"}},[n("el-input",{attrs:{placeholder:"菜品图片"},model:{value:t.dishesForm.img,callback:function(e){t.$set(t.dishesForm,"img",e)},expression:"dishesForm.img"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"所属分类"}},[n("el-select",{attrs:{placeholder:"所属分类"},model:{value:t.dishesForm.cid,callback:function(e){t.$set(t.dishesForm,"cid",e)},expression:"dishesForm.cid"}},t._l(t.typeList,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"菜品价格"}},[n("el-input",{attrs:{placeholder:"菜品价格"},model:{value:t.dishesForm.price,callback:function(e){t.$set(t.dishesForm,"price",e)},expression:"dishesForm.price"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"菜品描述"}},[n("el-input",{attrs:{placeholder:"菜品描述"},model:{value:t.dishesForm.desc,callback:function(e){t.$set(t.dishesForm,"desc",e)},expression:"dishesForm.desc"}})],1),t._v(" "),n("el-form-item")],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){return t.editForm(!1)}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editForm(!0)}}},[t._v("确 定")])],1)],1)},staticRenderFns:[]},U={name:"main-dishes",components:{DishesEdit:n("C7Lr")(I,E,!1,null,null,null).exports},data:function(){return{curID:"",curCID:"",dishesCID:"全部",dialogVisible:!1,status:0,dishesDatas:[],typeList:[],dishesForm:{name:"",img:"",price:"",cid:"",desc:""},pages:{currentPage1:2,total:7,size:1}}},watch:{dishesCID:function(t,e){"全部"===t?this.getDishes():this.getDishesCID(t)}},mounted:function(){this.getTypes()},computed:{cidStr:function(){var t=this;return function(e){var n=!0,a=!1,s=void 0;try{for(var r,o=z()(t.typeList);!(n=(r=o.next()).done);n=!0){var i=r.value;if(i.id===e)return i.name}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}}}},methods:{getTypes:function(){var t=this;g({url:g.adornUrl("/category/list"),method:"get"}).then(function(e){var n=e.data,a=n.code,s=n.data;1===a&&(t.typeList=s.list,t.$nextTick(function(){t.getDishes()}))}).catch(function(t){console.log(t)})},getDishes:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(t={pageNum:n},g({url:g.adornUrl("/menu/allList"),method:"get",params:t})).then(function(t){var a=t.data,s=a.code,r=a.data;1===s&&(e.dishesDatas=r.list,e.dishesCID="全部",e.pagesChange(n,r.totalPage))}).catch(function(t){console.log(t)})},getDishesCID:function(t){var e,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.curCID=t,(e={cid:t,pageNum:a},g({url:g.adornUrl("/menu/getListByCid"),method:"get",params:e})).then(function(t){var e=t.data,s=e.code,r=e.data;1===s&&(n.dishesDatas=r.list,n.pagesChange(a,r.totalPage))})},dealDatas:function(t){t?(this.status?this.editDo():this.add(),console.log("确定")):(this.dialogVisible=!1,this.clear())},add:function(){var t,e=this;(t=this.dishesForm,g({url:g.adornUrl("/menu/add"),method:"post",data:t})).then(function(t){var n=t.data,a=n.code,s=n.msg,r=n.errMsg;switch(a){case 0:e.$message({message:r,type:"warning"});break;case 1:e.$message({message:s,type:"success"}),e.clear(),e.dialogVisible=!1,e.getDishes()}}).catch(function(t){e.$message({message:"添加失败",type:"error"})})},edit:function(t){for(var e in this.dishesForm)this.dishesForm[e]=t[e];this.curID=t._id,this.status=1,this.dialogVisible=!0},editDo:function(){var t=this,e=this.dishesForm;e.id=this.curID,function(t){return g({url:g.adornUrl("/menu/update"),method:"post",data:t})}(e).then(function(e){var n=e.data,a=n.code,s=n.msg;1===a&&(t.$message({message:s,type:"success"}),t.clear(),t.dialogVisible=!1,t.getDishes())})},del:function(t,e){var n=this,a={id:t};this.$confirm("您正在删除菜品，是否确认删除《"+e+"》？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return g({url:g.adornUrl("/menu/delete"),method:"post",data:t})})(a).then(function(t){1===t.data.code&&(n.$message({type:"success",message:"菜品删除成功!"}),n.getDishes())})}).catch(function(t){console.log(t)})},clear:function(){for(var t in this.dishesForm)this.dishesForm[t]=""},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){"全部"===this.dishesCID?this.getDishes(t):this.getDishesCID(this.curCID,t),console.log("当前页: "+t)},pagesChange:function(t,e){this.pages.currentPage1=t,this.pages.total=e,this.pages.size=10}}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加菜品")]),t._v(" "),n("el-select",{attrs:{placeholder:"所属分类"},model:{value:t.dishesCID,callback:function(e){t.dishesCID=e},expression:"dishesCID"}},[n("el-option",{attrs:{label:"全部",value:"全部"}}),t._v(" "),t._l(t.typeList,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2),t._v(" "),n("DishesEdit",{attrs:{dialogVisible:t.dialogVisible,typeList:t.typeList,dishesForm:t.dishesForm,status:t.status},on:{edit:t.dealDatas}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dishesDatas}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"菜品名称"}},[n("span",[t._v(t._s(e.row.name))])]),t._v(" "),n("el-form-item",{attrs:{label:"菜品 ID"}},[n("span",[t._v(t._s(e.row._id))])]),t._v(" "),n("el-form-item",{attrs:{label:"菜品价格"}},[n("span",[t._v(t._s(e.row.price))])]),t._v(" "),n("el-form-item",{attrs:{label:"所属分类"}},[n("span",[t._v(t._s(t.cidStr(e.row.cid)))])]),t._v(" "),n("el-form-item",{attrs:{label:"更新日期"}},[n("span",[t._v(t._s(e.row.updateTime))])]),t._v(" "),n("el-form-item",{attrs:{label:"菜品描述"}},[n("span",[t._v(t._s(e.row.desc))])])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"img",label:"菜品图片",width:"300"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{attrs:{src:t.row.img,alt:t.row.name,width:"60",height:"60"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"_id",label:"菜品 ID"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"菜品名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"price",label:"菜品价格",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(n){return t.edit(e.row)}}},[t._v("Edit")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.del(e.row._id,e.row.name)}}},[t._v("Delete")])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{background:"","current-page":t.pages.currentPage1,"page-size":t.pages.size,layout:"prev, pager, next",total:t.pages.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.pages,"currentPage1",e)},"update:current-page":function(e){return t.$set(t.pages,"currentPage1",e)}}})],1)},staticRenderFns:[]};var R=n("C7Lr")(U,T,!1,function(t){n("2q2y")},null,null).exports,A={name:"main-table-number",data:function(){return{tableList:[],typeList:[],tableForm:{num:""}}},mounted:function(){this.getTableNumber()},methods:{getTableNumber:function(){var t=this;g({url:g.adornUrl("/table/list"),method:"get"}).then(function(e){console.log(e);var n=e.data,a=n.code,s=n.data;1===a&&(t.tableList=s.list)}).catch(function(t){console.log(t)})},add:function(){var t,e=this;(t=this.tableForm,g({url:g.adornUrl("/table/add"),method:"post",data:t})).then(function(t){console.log(t);var n=t.data,a=n.code,s=n.msg,r=n.errMsg;switch(a){case 0:e.$message({message:r,type:"warning"});break;case 1:e.$message({message:s,type:"success"}),e.getTableNumber(),e.tableForm.num=""}}).catch(function(t){console.log(t),e.$message({message:"添加失败",type:"error"})})},handleDelete:function(t){var e=this;this.$confirm("您正在删除桌号，是否确认删除《"+t.num+"》？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n;(n={id:t._id},g({url:g.adornUrl("/table/delete"),method:"post",data:n})).then(function(t){1===t.data.code&&(e.$message({type:"success",message:t.data.data}),e.getTableNumber())})}).catch(function(t){console.log(t)})}}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.tableForm,size:"small"}},[n("el-form-item",{attrs:{label:"桌号"}},[n("el-input",{attrs:{placeholder:"桌号"},model:{value:t.tableForm.num,callback:function(e){t.$set(t.tableForm,"num",e)},expression:"tableForm.num"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")])],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableList}},[n("el-table-column",{attrs:{label:"桌号 ID",prop:"_id"}}),t._v(" "),n("el-table-column",{attrs:{label:"桌号",prop:"num"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var V=n("C7Lr")(A,O,!1,function(t){n("gh9o")},"data-v-c67bbac8",null).exports,q={name:"main-info",data:function(){return{userLists:[],addList:{username:"",password:""}}},computed:{},methods:u()({},Object(c.b)(["handleUserReg","handleGetUserLists","handleUpdateUser"]),{handleEdit:function(t,e){e.showEdit=!0},handleFinish:function(t,e){var n=this,a={};a.username=e.username,a.password=e.password,a.id=e._id,this.handleUpdateUser(a).then(function(t){1===t.data.code?(n.$message({type:"success",message:"添加成功!"}),e.showEdit=!1):n.$message.error(t.data.data)}).catch(function(t){console.log(res)})},getUserLists:function(){var t=this;this.handleGetUserLists().then(function(e){e.data.data.userLists.forEach(function(t){t.showEdit=!1,-1===t.avatar.indexOf("http://116.62.147.91:3030")&&(t.avatar="http://116.62.147.91:3030"+t.avatar)}),t.userLists=e.data.data.userLists}).catch(function(t){console.log(t)})},onSubmit:function(){var t=this;""===this.addList.username?this.$message.error("请输入要添加的用户名"):""===this.addList.password?this.$message.error("请输入密码"):this.handleUserReg(this.addList).then(function(e){1===e.data.code?t.$message({type:"success",message:"添加成功!"}):t.$message.error(e.data.data)}).catch(function(t){console.log(t)})}}),mounted:function(){this.getUserLists()}},j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.addList}},[n("p",[t._v("添加新用户")]),t._v(" "),n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{placeholder:"用户名"},model:{value:t.addList.username,callback:function(e){t.$set(t.addList,"username",e)},expression:"addList.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.addList.password,callback:function(e){t.$set(t.addList,"password",e)},expression:"addList.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("添加")])],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userLists,border:""}},[n("el-table-column",{attrs:{type:"index"}}),t._v(" "),n("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.showEdit?n("el-input",{attrs:{value:e.row.username},model:{value:e.row[e.column.property],callback:function(n){t.$set(e.row,e.column.property,n)},expression:"scope.row[scope.column.property]"}}):n("span",[t._v(t._s(e.row.username))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"role",label:"权限",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.showEdit?n("el-input",{attrs:{value:e.row.role},model:{value:e.row[e.column.property],callback:function(n){t.$set(e.row,e.column.property,n)},expression:"scope.row[scope.column.property]"}}):n("span",[t._v(t._s(0==e.row.role?"超级管理员":"普通管理员"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"avatar",label:"头像",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.showEdit?n("el-input",{attrs:{value:e.row.avatar},model:{value:e.row[e.column.property],callback:function(n){t.$set(e.row,e.column.property,n)},expression:"scope.row[scope.column.property]"}}):n("div",{staticClass:"img-wrap"},[n("img",{attrs:{src:e.row.avatar,alt:""}})])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"password",label:"密码",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.showEdit?n("el-input",{attrs:{value:e.row.password,type:"password"},model:{value:e.row[e.column.property],callback:function(n){t.$set(e.row,e.column.property,n)},expression:"scope.row[scope.column.property]"}}):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.showEdit?n("el-button",{attrs:{size:"mini",disabled:0==e.row.role},on:{click:function(n){return t.handleFinish(e.$index,e.row)}}},[t._v("完成")]):n("el-button",{attrs:{size:"mini",disabled:0==e.row.role},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",disabled:0==e.row.role,type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var P=n("C7Lr")(q,j,!1,function(t){n("IWu/")},null,null).exports,H={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("mian-income")])},staticRenderFns:[]};var B=n("C7Lr")({name:"mian-income"},H,!1,function(t){n("jXU/")},null,null).exports,M={data:function(){return{visible:!1,tableData:[],currentRow:null}},methods:{init:function(t){var e=this;this.visible=!0,this.$nextTick(function(){e.tableData=t.list})},getSummaries:function(t){var e=t.columns,n=t.data,a=[];return e.forEach(function(t,e){if(0!==e){if(1!==e&&2!==e&&3!==e){var s=n.map(function(e){return Number(e[t.property])});s.every(function(t){return isNaN(t)})?a[e]="N/A":(a[e]=s.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:t+e},0),a[e]+=4===e?" 份":" 元")}}else a[e]="总计"}),a}}},X={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"订单详情","close-on-click-modal":!0,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"show-summary":"","summary-method":t.getSummaries,"highlight-current-row":""}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{property:"menuItem",label:"菜名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.menuDetail.name)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{property:"image",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{attrs:{width:"40",height:"40",src:t.row.menuDetail.img}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"单价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.menuDetail.price)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{property:"count",label:"数量"}}),t._v(" "),n("el-table-column",{attrs:{property:"total",label:"合计"}})],1)],1)},staticRenderFns:[]},W=n("C7Lr")(M,X,!1,null,null,null).exports,G=n("Wn42"),K=n.n(G),J={name:"main-order",data:function(){return{orderList:[],orderVisible:!1,total:0,pageSize:10,pageNum:1}},methods:{view:function(t){var e=this;this.orderVisible=!0,this.$nextTick(function(){e.$refs.orderDetail.init(t)})},getList:function(){var t,e=this,n={pageNum:this.pageNum,pageSize:this.pageSize};(t=n,g({url:g.adornUrl("/order/hlist?")+K.a.stringify(t),method:"get"})).then(function(t){t.data.data.list.map(function(t){t.created=new Date(t.created).toLocaleString(),t.list.map(function(t){t.total=t.menuDetail.price*t.count})}),e.orderList=t.data.data.list,e.total=t.data.data.totalPage})},sizeChangeHandle:function(t){this.pageSize=t,this.pageNum=1,this.getList()},currentChangeHandle:function(t){this.pageNum=t,this.getList()},getSummaries:function(t){var e=t.columns,n=t.data,a=[];return e.forEach(function(t,e){if(0!==e){if(1!==e&&2!==e&&3!==e&&4!==e&&6!==e){var s=n.map(function(e){return Number(e[t.property])});s.every(function(t){return isNaN(t)})?a[e]="N/A":(a[e]=s.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:t+e},0),a[e]+=" 元")}}else a[e]="合计"}),a}},mounted:function(){this.getList()},components:{OrderDetail:W}},Y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-order-record"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,border:"","show-summary":"","summary-method":t.getSummaries}},[n("el-table-column",{attrs:{type:"index",width:"80px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"tableNum",width:"100px",sortable:"",label:"桌号"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.tableNum?[t._v("\n        "+t._s(e.row.tableNum.num)+"\n      ")]:void 0}}],!0)}),t._v(" "),n("el-table-column",{attrs:{prop:"orderNum",sortable:"",label:"订单号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"created",sortable:"",label:"下单时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.created)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),n("el-table-column",{attrs:{prop:"amount",label:"实付金额"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.view(e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.total},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}}),t._v(" "),t.orderVisible?n("order-detail",{ref:"orderDetail"}):t._e()],1)},staticRenderFns:[]};var Z=n("C7Lr")(J,Y,!1,function(t){n("sk8z")},null,null).exports,Q={data:function(){return{visible:!1,tableData:[],currentRow:null}},methods:{init:function(t){var e=this;this.visible=!0,this.$nextTick(function(){e.tableData=t.list})},getSummaries:function(t){var e=t.columns,n=t.data,a=[];return e.forEach(function(t,e){if(0!==e){if(1!==e&&2!==e&&3!==e){var s=n.map(function(e){return Number(e[t.property])});s.every(function(t){return isNaN(t)})?a[e]="N/A":(a[e]=s.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:t+e},0),a[e]+=4===e?" 份":" 元")}}else a[e]="总计"}),a}}},tt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"订单详情","close-on-click-modal":!0,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"show-summary":"","summary-method":t.getSummaries,"highlight-current-row":""}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{property:"menuItem",label:"菜名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.menuDetail.name)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{property:"image",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{attrs:{width:"40",height:"40",src:t.row.menuDetail.img}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"单价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.menuDetail.price)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{property:"count",label:"数量"}}),t._v(" "),n("el-table-column",{attrs:{property:"total",label:"合计"}})],1)],1)},staticRenderFns:[]},et={name:"main-order",data:function(){return{orderList:[],orderVisible:!1,total:0,pageSize:20,pageNum:1}},methods:{clickButton:function(t){this.$socket.emit("emit_method",t)},view:function(t){var e=this;this.orderVisible=!0,this.$nextTick(function(){e.$refs.orderDetail.init(t)})},getList:function(){var t,e=this,n={pageNum:this.pageNum,pageSize:this.pageSize};(t=n,g({url:g.adornUrl("/order/clist?")+K.a.stringify(t),method:"get"})).then(function(t){t.data.data.list.map(function(t){t.created=new Date(t.created).toLocaleString(),t.list.map(function(t){t.total=t.menuDetail.price*t.count})}),e.orderList=t.data.data.list,e.total=t.data.data.totalPage})},sizeChangeHandle:function(t){this.pageSize=t,this.pageNum=1,this.getList()},currentChangeHandle:function(t){this.pageNum=t,this.getList()},handleFinish:function(t,e){var n=this;(function(t){return g({url:g.adornUrl("/order/update"),method:"post",data:t})})({orderId:e._id,status:t}).then(function(t){1==t.data.code&&n.getList()})},getSummaries:function(t){var e=t.columns,n=t.data,a=[];return e.forEach(function(t,e){if(0!==e){if(1!==e&&2!==e&&3!==e&&4!==e&&5!==e&&7!==e){var s=n.map(function(e){return Number(e[t.property])});s.every(function(t){return isNaN(t)})?a[e]="N/A":(a[e]=s.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:t+e},0),a[e]+=" 元")}}else a[e]="合计"}),a}},sockets:{NEW_ORDER:function(t){this.getList(),this.$refs.audio&&(this.$refs.audio.pause(),this.$refs.audio.play())}},mounted:function(){this.getList()},components:{OrderDetail:n("C7Lr")(Q,tt,!1,null,null,null).exports}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-order"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderList,"show-summary":"","summary-method":t.getSummaries,border:""}},[a("el-table-column",{attrs:{type:"index",width:"80px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tableNum",width:"100px",sortable:"",label:"桌号"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.tableNum?[t._v("\n        "+t._s(e.row.tableNum.num)+"\n      ")]:void 0}}],!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"orderNum",sortable:"",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created",sortable:"",label:"下单时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.created)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"status",label:"订单状态",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("span",[t._v("未处理")]):t._e(),t._v(" "),1==e.row.status?a("span",[t._v("已通知后厨")]):t._e(),t._v(" "),2==e.row.status?a("span",[t._v("已上菜")]):t._e(),t._v(" "),3==e.row.status?a("span",[t._v("菜以上齐")]):t._e(),t._v(" "),4==e.row.status?a("span",[t._v("已结账")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[4==e.row.status?a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.row.remark,callback:function(n){t.$set(e.row,"remark",n)},expression:"scope.row.remark"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"amount",label:"订单金额",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[4==e.row.status?a("el-input",{attrs:{placeholder:"请输入内容",type:"number"},model:{value:e.row.amount,callback:function(n){t.$set(e.row,"amount",n)},expression:"scope.row.amount"}}):a("span",[t._v(t._s(e.row.amount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.view(e.row)}}},[t._v("查看")]),t._v(" "),0==e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return t.handleFinish(1,e.row)}}},[t._v("通知后厨")]):t._e(),t._v(" "),1==e.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){return t.handleFinish(2,e.row)}}},[t._v("已上菜")]):t._e(),t._v(" "),2==e.row.status?a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){return t.handleFinish(3,e.row)}}},[t._v("菜以上齐")]):t._e(),t._v(" "),3==e.row.status?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(n){return t.handleFinish(4,e.row)}}},[t._v("已结账")]):t._e(),t._v(" "),4==e.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleFinish(5,e.row)}}},[t._v("完成")]):t._e()]}}])})],1),t._v(" "),a("audio",{ref:"audio",attrs:{controls:""}},[a("source",{attrs:{src:n("/zTA"),type:"audio/mp3"}})]),t._v(" "),a("el-pagination",{attrs:{background:"","page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}}),t._v(" "),t.orderVisible?a("order-detail",{ref:"orderDetail"}):t._e()],1)},staticRenderFns:[]};var at=n("C7Lr")(et,nt,!1,function(t){n("p3S5")},null,null).exports,st={props:{group:{type:String,value:"default"},pageNum:{type:Number,value:1},pageSize:{type:Number,value:10}},data:function(){return{actionUrl:"http://116.62.147.91:3030/image/upload",list:[],extData:{group:this.group,pageNum:this.pageNum,pageSize:this.pageSize,name:"未命名"},fileList:[]}},created:function(){this.getList()},methods:{refresh:function(){this.getList()},getList:function(){var t=this;g({url:g.adornUrl("/image/query?group="+this.group+"&pageNum="+this.pageNum+"&pageSize="+this.pageSize),method:"get",data:{}}).then(function(e){e.data.data.list.length>0?(e.data.data.list.map(function(t){t.url="http://116.62.147.91:3030"+t.url}),t.list=e.data.data.list):t.list=[]})},submitUpload:function(){this.$refs.upload.submit()},handleSuccess:function(){this.refresh(),this.fileList=[]},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)}}},rt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",[n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.actionUrl,name:"file",limit:1,data:t.extData,"auto-upload":!1,"on-success":t.handleSuccess}},[n("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),t.list.length>0?n("el-row",t._l(t.list,function(e,a){return n("el-col",{key:a,staticClass:"card-box-outer",attrs:{span:4}},[n("el-card",{staticClass:"card-box",attrs:{shadow:"hover"}},[n("img",{staticClass:"image",attrs:{src:e.url}}),t._v(" "),n("div",{staticStyle:{padding:"14px"}},[n("span",[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"bottom clearfix"})])])],1)}),1):n("div",[t._v("暂无数据")])],1)},staticRenderFns:[]};var ot={name:"main-gallery",data:function(){return{activeName:"default"}},components:{galleryList:n("C7Lr")(st,rt,!1,function(t){n("SJW7")},"data-v-72af1fd5",null).exports},methods:{handleClick:function(){}}},it={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-metarial"},[n("h6",{staticClass:"page-title"},[t._v("素材管理")]),t._v(" "),n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"未分组",name:"default"}},[n("gallery-list",{attrs:{group:"default"}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"菜品分组",name:"menu"}},[n("gallery-list",{attrs:{group:"menu"}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"用户头像",name:"avatar"}},[n("gallery-list",{attrs:{group:"avatar"}})],1)],1)],1)},staticRenderFns:[]};var lt=n("C7Lr")(ot,it,!1,function(t){n("1Xcz")},"data-v-f74573fa",null).exports;a.default.use(i.a);var ut=new i.a({routes:[{path:"/login",name:"login",component:p,meta:{requireAuth:!1}},{path:"/",name:"main",redirect:{name:"types"},component:L,meta:{requireAuth:!0},children:[{path:"/types",name:"types",component:D,meta:{requireAuth:!0}},{path:"/dishes",name:"dishes",component:R,meta:{requireAuth:!0}},{path:"/tables",name:"tables",component:V,meta:{requireAuth:!0}},{path:"/info",name:"info",component:P,meta:{requireAuth:!0}},{path:"/income",name:"income",component:B,meta:{requireAuth:!0}},{path:"/records",name:"records",component:Z,meta:{requireAuth:!0}},{path:"/order",name:"order",component:at,meta:{requireAuth:!0}},{path:"/meterial",name:"meterial",component:lt,meta:{requireAuth:!0}}]}]}),ct=n("R2wu"),dt=n.n(ct),mt=(n("XEXE"),n("rVsN")),pt=n.n(mt);a.default.use(c.a);var ht=new c.a.Store({state:{status:"",token:sessionStorage.getItem("token")||"",username:"",role:"",avatar:"",id:""},mutations:{auth_request:function(t){t.status="lodaing"},auth_success:function(t,e){t.status="success",t.username=e.username,t.role=e.role,t.avatar=e.avatar,t.id=e.id},setToken:function(t,e){t.token=e}},actions:{handleLogin:function(t,e){var n=t.commit;return new pt.a(function(t,a){var s;(s=e,g({url:g.adornUrl("/user/login"),method:"post",data:s})).then(function(e){if(1===e.data.code){var a=e.data.data;n("setToken",a),sessionStorage.setItem("token",a),t(e)}else t(!1)}).catch(function(t){sessionStorage.removeItem("token"),a(t)})})},logout:function(t){t.commit;return new pt.a(function(t,e){sessionStorage.removeItem("token"),delete f.a.defaults.headers.common.Authorization,t()})},handleUserInfo:function(t){var e=t.commit;return new pt.a(function(t,n){g({url:g.adornUrl("/user/info"),method:"get"}).then(function(n){if(1===n.data.code){var a=n.data.data;e("auth_success",a),t(a)}else t(!1)}).catch(function(t){n(t)})})},handleGetTypeInfo:function(t){t.commit;return new pt.a(function(t,e){g({url:g.adornUrl("/category/list"),method:"get"}).then(function(e){if(1===e.data.code){var n=e.data.data;t(n)}}).catch(function(t){e(t)})})},handleAddTypesList:function(t,e){t.commit;var n={};return n.name=e.name,e.desc&&(n.desc=e.desc),new pt.a(function(t,e){var a;(a=n,g({url:g.adornUrl("/category/add"),method:"post",data:a})).then(function(e){t(e)}).catch(function(t){e(t)})})},handleDeleteType:function(t,e){t.commit;var n={};return n.id=e,new pt.a(function(t,e){var a;(a=n,g({url:g.adornUrl("/category/delete"),method:"post",data:a})).then(function(e){t(e)}).catch(function(t){e(t)})})},handleUpdataType:function(t,e){t.commit;return new pt.a(function(t,n){(function(t){return g({url:g.adornUrl("/category/update"),method:"post",data:t})})(e).then(function(e){t(e)}).catch(function(t){n(t)})})},handleGetUserLists:function(t){t.commit;var e={pageNum:1,pageSize:10};return new pt.a(function(t,n){(function(t){return g({url:g.adornUrl("/user/inquire"),method:"get",data:t})})(e).then(function(e){t(e)}).catch(function(t){n(t)})})},handleUserReg:function(t,e){t.commit;return new pt.a(function(t,n){(function(t){return g({url:g.adornUrl("/user/reg"),method:"post",data:t})})(e).then(function(e){t(e)}).catch(function(t){n(t)})})},handleUpdateUser:function(t,e){t.commit;return new pt.a(function(t,n){(function(t){return g({url:g.adornUrl("/user/update"),method:"post",data:t})})(e).then(function(e){t(e)}).catch(function(t){n(t)})})}}}),ft=n("UgaL"),vt=n.n(ft);a.default.use(new vt.a({debug:!0,connection:"http://116.62.147.91:3030",vuex:{store:ht,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),a.default.use(dt.a),a.default.http=a.default.prototype.$http=g,a.default.config.productionTip=!1,ut.beforeEach(function(t,e,n){t.meta.requireAuth?sessionStorage.getItem("token")?"success"==ht.state.status?n():ht.dispatch("handleUserInfo").then(function(t){n()}).catch(function(t){n("/login")}):n("/login"):n()}),new a.default({el:"#app",router:ut,store:ht,components:{App:o},template:"<App/>"})},SJW7:function(t,e){},XAiR:function(t,e){},XEXE:function(t,e){},gh9o:function(t,e){},"jXU/":function(t,e){},jfB9:function(t,e){},oIep:function(t,e){},p3S5:function(t,e){},sk8z:function(t,e){},tWeq:function(t,e){},um6K:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a0565acbed4cab77ec0b.js.map